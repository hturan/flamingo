<!DOCTYPE html>
<html>
<head>
  <title>flamingo</title>

  <style type="text/css">
    html, body {
      height: 100%;
      width: 100%;
      position: relative;
      margin: 0;
      padding: 0;
      background: black;
    }
  </style>
</head>
<body>
  <script type="text/javascript">
    var ws = new WebSocket(location.origin.replace(/^http/, 'ws'));

    webSocketActive = false;

    ws.onopen = function () {
      ws.send(JSON.stringify({client_type: 'controller'}));
      webSocketActive = true;
    };

    window.addEventListener('deviceorientation', function(eventData) {
      if (webSocketActive) {
        ws.send(JSON.stringify({x: eventData.beta, y: eventData.alpha, z: eventData.gamma}));
      }
    });
  </script>
</body>
</html>